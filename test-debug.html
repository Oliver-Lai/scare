<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>恐怖逃脫遊戲 - 測試頁面</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="gameContainer">
        <!-- 標題畫面 -->
        <div id="titleScreen" class="scene active">
            <div class="scene-container">
                <h1 class="game-title">🏚️ 恐怖逃脫遊戲</h1>
                <button onclick="startGame()" class="start-btn">開始遊戲</button>
            </div>
        </div>

        <!-- 客廳場景 -->
        <div id="livingRoom" class="scene">
            <div class="scene-container">
                <h2>客廳</h2>
                <div class="navigation">
                    <button class="nav-btn" onclick="testGoToScene('bathroom')">🚪 前往浴室</button>
                    <button class="nav-btn" onclick="testGoToScene('basement')">⬇️ 前往地下室</button>
                    <button class="nav-btn" onclick="testJumpScare()">測試 Jump Scare</button>
                </div>
                <!-- 相框 -->
                <svg width="400" height="300" class="scene-svg">
                    <rect x="50" y="50" width="120" height="80" fill="#8B4513" stroke="#654321" stroke-width="8" rx="5"/>
                    <rect x="60" y="60" width="100" height="60" fill="#2C3E50" class="clickable animated-item" data-item="picture" onclick="testJumpScare()"/>
                    <text x="110" y="90" fill="#fff" text-anchor="middle" font-size="12">相框</text>
                </svg>
            </div>
        </div>

        <!-- 浴室場景 -->
        <div id="bathroom" class="scene">
            <div class="scene-container">
                <h2>浴室</h2>
                <div class="navigation">
                    <button class="nav-btn" onclick="testGoToScene('livingRoom')">🏠 回到客廳</button>
                </div>
                <p>這是浴室場景</p>
            </div>
        </div>

        <!-- 地下室場景 -->
        <div id="basement" class="scene">
            <div class="scene-container">
                <h2>地下室</h2>
                <div class="navigation">
                    <button class="nav-btn" onclick="testGoToScene('livingRoom')">🏠 回到客廳</button>
                </div>
                <p>這是地下室場景</p>
            </div>
        </div>
    </div>

    <!-- Jump Scare 畫面 -->
    <div id="jumpScare" class="jumpscare">
        <svg width="100%" height="100%" class="scare-image">
            <rect width="100%" height="100%" fill="#000"/>
            <text x="50%" y="50%" fill="#ff0000" text-anchor="middle" font-size="48" font-weight="bold">👻 SCARE!</text>
        </svg>
    </div>

    <script>
        console.log('測試頁面已載入');

        // 測試場景切換
        function testGoToScene(sceneName) {
            console.log('=== 測試場景切換 ===');
            console.log('切換到場景:', sceneName);
            
            // 隱藏所有場景
            const scenes = document.querySelectorAll('.scene');
            scenes.forEach(scene => {
                scene.classList.remove('active');
                scene.style.display = 'none';
            });
            
            // 顯示目標場景
            const targetScene = document.getElementById(sceneName);
            if (targetScene) {
                targetScene.classList.add('active');
                targetScene.style.display = 'block';
                console.log('場景切換成功:', sceneName);
            } else {
                console.error('找不到場景:', sceneName);
            }
        }

        // 測試 Jump Scare
        function testJumpScare() {
            console.log('=== 測試 Jump Scare ===');
            const jumpScare = document.getElementById('jumpScare');
            
            if (!jumpScare) {
                console.error('找不到 jumpScare 元素');
                return;
            }
            
            console.log('顯示 Jump Scare...');
            jumpScare.style.display = 'flex';
            jumpScare.classList.add('active');
            
            // 添加震動效果
            const gameContainer = document.getElementById('gameContainer');
            if (gameContainer) {
                gameContainer.style.animation = 'jumpScareShake 0.5s ease-in-out';
            }
            
            console.log('Jump Scare 已顯示');
            
            // 3 秒後隱藏
            setTimeout(() => {
                jumpScare.style.display = 'none';
                jumpScare.classList.remove('active');
                if (gameContainer) {
                    gameContainer.style.animation = '';
                }
                console.log('Jump Scare 已隱藏');
            }, 3000);
        }

        // 開始遊戲
        function startGame() {
            console.log('開始遊戲');
            testGoToScene('livingRoom');
        }

        // 初始化
        document.addEventListener('DOMContentLoaded', () => {
            console.log('頁面初始化完成');
            // 確保初始狀態正確
            testGoToScene('titleScreen');
        });
    </script>
</body>
</html>
